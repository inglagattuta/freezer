<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Freezer Inventory</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-4">
  <div id="root"></div>

  <script type="text/babel">
    // ============================
    // üî• Firebase config
    // ============================
   const firebaseConfig = {
  apiKey: "AIzaSyBmWi-5wQ97PA4TanAC5mHFAqmsNR9aUpE",
  authDomain: "lista-spesa-famiglia-95127.firebaseapp.com",
  databaseURL: "https://lista-spesa-famiglia-95127-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "lista-spesa-famiglia-95127",
  storageBucket: "lista-spesa-famiglia-95127.firebasestorage.app",
  messagingSenderId: "131762886904",
  appId: "1:131762886904:web:04b14e5c7567c78de9c30d"
};

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ============================
    // React App
    // ============================
    function App() {
      const [items, setItems] = React.useState([]);
      const [nome, setNome] = React.useState("");
      const [quantita, setQuantita] = React.useState(1);
      const [categoria, setCategoria] = React.useState("generale");

      // Carica dati da Firebase
      React.useEffect(() => {
        db.collection("freezer")
          .orderBy("nome")
          .onSnapshot(snapshot => {
            const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            setItems(data);
          });
      }, []);

      // Aggiungi alimento
      const aggiungi = async () => {
        if (!nome.trim()) return;
        await db.collection("freezer").add({ nome, quantita, categoria, ts: Date.now() });
        setNome("");
        setQuantita(1);
      };

      // Rimuovi
      const elimina = async (id) => {
        await db.collection("freezer").doc(id).delete();
      };

      return (
        <div className="max-w-xl mx-auto bg-white p-4 rounded-xl shadow">
          <h1 className="text-2xl font-bold mb-4 text-center">üçó Freezer Inventory</h1>

          {/* Form */}
          <div className="flex gap-2 mb-4">
            <input
              className="border p-2 flex-1 rounded"
              placeholder="Alimento"
              value={nome}
              onChange={e => setNome(e.target.value)}
            />

            <input
              type="number"
              className="border w-20 p-2 rounded"
              value={quantita}
              onChange={e => setQuantita(parseInt(e.target.value))}
            />

            <select
              className="border p-2 rounded"
              value={categoria}
              onChange={e => setCategoria(e.target.value)}
            >
              <option value="generale">Generale</option>
              <option value="carne">Carne</option>
              <option value="pesce">Pesce</option>
              <option value="verdure">Verdure</option>
              <option value="dolci">Dolci</option>
            </select>

            <button
              onClick={aggiungi}
              className="bg-blue-600 text-white px-4 rounded"
            >
              +
            </button>
          </div>

          {/* Lista */}
          <ul className="divide-y">
            {items.map(item => (
              <li key={item.id} className="py-2 flex justify-between items-center">
                <div>
                  <span className="font-semibold">{item.nome}</span> ‚Äî
                  <span className="ml-1 text-gray-600">{item.quantita}</span>
                  <span className="ml-2 text-sm bg-gray-200 px-2 py-1 rounded">{item.categoria}</span>
                </div>
                <button
                  onClick={() => elimina(item.id)}
                  className="text-red-600 font-bold"
                >
                  ‚úï
                </button>
              </li>
            ))}
          </ul>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
